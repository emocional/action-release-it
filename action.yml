name: release-it
description: 'Release with release it'

branding:
  icon: 'airplay'
  color: 'red'

inputs:
  git-name:
    required: false
    description: git user name
  git-mail:
    required: false
    description: git user email
  token:
    description: github token
    default: ${{ github.token }}
  npm-token:
    description: npm-token
    default: ${{ github.token }}

runs:
  using: 'composite'
  steps:
    - uses: emocional/action-git-config@main
      with:
        git-mail: ${{ inputs.git-mail }}
        git-name: ${{ inputs.git-name }}

    - name: Release
      run: pnpm release-it --ci
      shell: sh
      env:
        GITHUB_TOKEN: ${{ inputs.token }}
        NODE_AUTH_TOKEN: ${{ inputs.npm-token }}

